(this["webpackJsonpgs-report-template-ui"]=this["webpackJsonpgs-report-template-ui"]||[]).push([[0],{67:function(e,t,a){},68:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(32),c=a.n(n),s=(a(67),a(68),a(5)),l=a(2),i=a(15),o=a(1),u=["children"],d=function(e){var t=e.children,a=Object(i.a)(e,u);return Object(o.jsx)("div",{className:"m-2 w-full",children:Object(o.jsx)("div",Object(l.a)(Object(l.a)({className:"flex pr-4"},a),{},{children:t}))})},b={primary:"bg-black text-white hover:bg-gray-600",secondary:"bg-blue-600 text-white hover:bg-blue-400",tertiary:"bg-yellow-600 text-white hover:bg-yellow-400",error:"bg-red-600 text-white hover:bg-red-400"},j={xs:"h-10 w-28",s:"h-12 w-32"},p=function(e){var t=e.variant,a=void 0===t?"primary":t,r=e.size,n=void 0===r?"s":r,c=e.children,s=e.customStyle,l=void 0===s?"":s,i=e.disabled,u=void 0!==i&&i,d=e.onClick,p=void 0===d?function(){}:d;return Object(o.jsx)(o.Fragment,{children:u?Object(o.jsx)("button",{onClick:p,className:"bg-gray-500 text-white cursor-not-allowed ".concat(j[n]),disabled:u,children:c}):Object(o.jsx)("button",{onClick:p,className:"".concat(b[a]," ").concat(j[n]," ").concat(l),disabled:u,children:c})})},x=a(7),h=a(10),f=a(4),O=a.n(f),m="/api/template",v=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m),{method:"GET"});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/").concat(t),{method:"GET"});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(O.a.mark((function e(t,a,r){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),a&&n.append("name",a),r&&n.append("description",r),e.next=6,fetch("".concat(m,"/upload"),{method:"POST",body:n});case 6:return c=e.sent,e.abrupt("return",c.json());case 8:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m,"/").concat(t),{method:"DELETE"});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(O.a.mark((function e(t,a){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api/report","/generate/").concat(t),{method:"POST",body:a});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=["onChange","onKeyPress","value","label","placeholder","id","labelStyle","disabled","maxLength"],S=function(e){var t=e.onChange,a=e.onKeyPress,r=e.value,n=e.label,c=e.placeholder,s=e.id,u=e.labelStyle,d=e.disabled,b=e.maxLength,j=Object(i.a)(e,C);return Object(o.jsxs)("div",{className:"flex w-full mb-6 md:mb-0",children:[n&&Object(o.jsx)("label",{className:"block tracking-wide text-gray-700 text-lg m-2 text-right ".concat(u),htmlFor:s,children:n}),Object(o.jsx)("input",Object(l.a)({className:"appearance-none block w-full ".concat(d?"bg-gray-400":"bg-gray-200"," text-gray-700 border rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white"),id:s,type:"text",placeholder:c,value:r,onChange:t,onKeyPress:a,disabled:d,maxLength:b},j))]})},E=a(44),T=["XLS","XLSX"],D=function(e){var t=e.onDrop;return Object(o.jsx)(E.a,{classes:"h-full",handleChange:function(e){t(e)},name:"file",types:T})},P=function(e){var t,a=e.template,r=e.dispatchTemplate,n=e.save,c=e.doesNameExist,s=e.exist,i=function(){var e=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,a.name,a.description);case 2:n=e.sent,r({type:"JSON",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"w-full p-4",children:[Object(o.jsxs)("div",{className:"mb-2 text-left",children:[Object(o.jsx)("text",{className:"text-lg font-bold",children:"Template Structure"}),Object(o.jsx)("text",{children:" - Start by uploading your excel file template"})]}),Object(o.jsx)("div",{className:"mb-6 w-full text-left",children:Object(o.jsx)(D,{onDrop:i})}),Object(o.jsx)("div",{className:"w-full max-w-lg",children:Object(o.jsxs)("div",{className:"flex flex-wrap -mx-3 mb-6",children:[Object(o.jsx)(S,{label:"*Name:",id:"name",onChange:function(e){var t,n=null===(t=e.target.value)||void 0===t?void 0:t.replace(" ","");r({type:"UPDATE",payload:Object(l.a)(Object(l.a)({},a),{},{name:n})}),n&&n.length>=6&&c(n)},value:a.name,maxLength:20,placeholder:"Enter template name without spaces (min 6 , max 20 char)"}),s&&(null===(t=a.name)||void 0===t?void 0:t.length)>=6&&Object(o.jsxs)("span",{className:"flex flex-wrap m-1 text-red-400 text-sm",children:["Name ",a.name," already exist."]})]})}),Object(o.jsx)("div",{className:"w-full max-w-lg",children:Object(o.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(o.jsx)(S,{label:"*Description:",id:"description",onChange:function(e){r({type:"UPDATE",payload:Object(l.a)(Object(l.a)({},a),{},{description:e.target.value})})},value:a.description,maxLength:300,placeholder:"Enter description (max 300 char)"})})}),Object(o.jsx)("div",{className:"w-full max-w-lg",children:Object(o.jsx)("div",{className:"flex flex-wrap -mx-3 mb-6",children:Object(o.jsx)(p,{disabled:!a.name||!a.description||a.name.length<6||s,onClick:function(){return n()},children:"Save"})})})]})},L=a(48),U=a(49),R=function(e){var t=e.template,a=void 0===t?{}:t,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){n.current.innerHTML=L.a.toHtml(a)})),Object(o.jsxs)("div",{className:"flex-grow w-full text-left p-4 border-l-2 border-solid",children:[Object(o.jsx)("text",{className:"text-lg font-bold",children:"Preview"}),Object(o.jsx)("text",{children:" - This is a preview of your report"}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)(U.CopyToClipboard,{className:"bg-green-500 hover:cursor-pointer p-2 rounded-md",text:JSON.stringify(a),onCopy:function(){return alert("Copy to Clipboard was successful.")},children:Object(o.jsx)("span",{children:"Copy JSON to Clipboard"})})}),Object(o.jsx)("div",{className:"border-gray-400 border-solid",children:Object(o.jsx)("div",{className:"w-full text-left mt-2",children:Object(o.jsx)("pre",{className:"relative rounded-xl overflow-auto p-4",ref:n})})})]})},J="xlsx",A={name:null,description:null,format:J,sheets:[],createdBy:"Jed Dayo"},F=function(e){return Object(l.a)({},e)},_="RESET",M=function(e,t){switch(t.type){case"UPDATE":return Object(l.a)(Object(l.a)({},e),t.payload);case"UPDATE_ROW":var a=t.payload,r=a.index,n=a.key,c=a.value,s=a.parent,i=Object(h.a)(e[s]);i[r][n]=c;var o=Object(l.a)({},e);return o[s]=i,Object(l.a)(Object(l.a)({},e),o);case"ADD_ROW":var u=t.payload,d=u.parent,b=u.defaultRow,j=Object(l.a)({},e);return j[d]=[].concat(Object(h.a)(e[d]),[b]),Object(l.a)({},j);case"DELETE_ROW":var p=t.payload,x=p.index,f=p.parent,O=Object(h.a)(e[f]),m=Object(l.a)({},e);return O.splice(x,1),m[f]=Object(h.a)(O),Object(l.a)({},m);case"MOVE_COLUMN_DOWN":var v=t.payload,w=v.index,g=v.parent,y=Object(h.a)(e[g]);y[w].index=y[w].index+1,y[w+1].index=y[w+1].index-1;var N=y[w];y[w]=y[w+1],y[w+1]=N;var k=Object(l.a)({},e);return k[g]=Object(h.a)(y),Object(l.a)({},k);case"MOVE_COLUMN_UP":var C=t.payload,S=C.index,E=C.parent,T=Object(h.a)(e[E]);T[S].index=T[S].index-1,T[S-1].index=T[S-1].index+1;var D=T[S];T[S]=T[S-1],T[S-1]=D;var P=Object(l.a)({},e);return P[E]=Object(h.a)(T),Object(l.a)({},P);case _:return Object(l.a)({},F(A));case"JSON":return Object(l.a)(Object(l.a)({},e),t.payload);default:throw new Error}},B=function(e){var t=e.back,a=e.existingTemplate,n=Object(r.useReducer)(M,a||A,F),c=Object(s.a)(n,2),l=c[0],i=c[1],u=Object(r.useState)(!1),d=Object(s.a)(u,2),b=d[0],j=d[1],h=Object(r.useState)(),f=Object(s.a)(h,2),m=f[0],w=f[1],y=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(t);case 3:200===e.sent.status?w(!0):w(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),w(!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(l);case 3:t(),i({type:_}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Error saving the template. Unable to contact server.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"m-2 w-full h-full",children:[Object(o.jsx)("div",{className:"w-full p-2 h-full border-l border-gray-200 ",children:Object(o.jsx)("div",{className:"w-full text-right pr-4",children:Object(o.jsx)(p,{onClick:function(){return j(!b)},children:"".concat(b?"Close Preview":"Open Preview")})})}),Object(o.jsxs)("div",{className:"m-2 flex w-full h-full",children:[Object(o.jsx)(P,{template:l,dispatchTemplate:i,save:N,doesNameExist:y,exist:m}),b&&Object(o.jsx)(R,{template:l})]})]})},W=a(50),G=a.n(W),K=a(62),X=["title"],H=function(e){var t=e.title,a=Object(i.a)(e,X);return Object(o.jsx)("div",Object(l.a)(Object(l.a)({className:"font-sans text-lg text-white bg-blue-400 p-2 flex"},a),{},{children:Object(o.jsx)("h2",{children:t})}))},I=a(61),V=a(51),q=a.n(V),z={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"800px"}},Y=function(e){var t=e.template,a=e.isOpen,n=e.customStyles,c=void 0===n?z:n,l=e.onClose,i=Object(r.useState)(),u=Object(s.a)(i,2),d=u[0],b=u[1],j=Object(r.useState)({test:"excel"}),h=Object(s.a)(j,2),f=h[0],m=h[1],v=Object(r.useState)(!1),w=Object(s.a)(v,2),g=w[0],y=w[1],N=function(){var e=Object(x.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null,k(t.name,d).then((function(e){return 200===e.status?(a=e.headers.get("content-disposition").split(";")[1].split("=")[1],e.blob()):void 0})).then((function(e){q()(e,a,"application/octet-stream")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"w-full",children:Object(o.jsxs)(G.a,{isOpen:a,onRequestClose:l,style:c,children:[Object(o.jsx)("button",{onClick:l,className:"absolute top-0 right-0 text-xl",children:Object(o.jsx)(K.a,{})}),Object(o.jsx)(H,{title:"Test Your Template"}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsxs)("div",{className:"p-2",children:[Object(o.jsx)("h2",{className:"font-bold",children:t.name}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)(I.a,{id:t.name,placeholder:f,height:"550px",width:"700px",onChange:function(e){var t=e.json;e.error&&y(!0),m(JSON.parse(t)),b(t)}})})]})}),Object(o.jsx)("div",{className:"p-2",children:Object(o.jsx)(p,{variant:"tertiary",onClick:function(){return N(t.name)},disabled:g,children:"Generate Report"})})]})})},Q=function(e){var t=e.handleUpdate,a=Object(r.useState)([]),n=Object(s.a)(a,2),c=n[0],l=n[1],i=Object(r.useState)(),u=Object(s.a)(i,2),d=u[0],b=u[1],j=function(){var e=Object(x.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:t=e.sent,l(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Error fetching templates. Unable to contact server.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j()}),[]);var h=function(){var e=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t);case 3:alert("Delete was successful of template - ".concat(t,".")),j(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),alert("Error fetching templates. Unable to contact server.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"m-2 w-full h-full",children:[Object(o.jsxs)("table",{className:"table-auto w-full text-sm",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{className:"border-b dark:border-slate-600 font-medium p-4 pl-8 pt-0 pb-3 text-slate-400 dark:text-slate-200 text-left",children:[Object(o.jsx)("th",{width:"20%",children:"Name"}),Object(o.jsx)("th",{width:"15%",children:"Format"}),Object(o.jsx)("th",{width:"20%",children:"Description"}),Object(o.jsx)("th",{width:"10%",children:"Action"})]})}),Object(o.jsx)("tbody",{className:"bg-white dark:bg-slate-800",children:c&&c.map((function(e,a){return Object(o.jsxs)("tr",{className:"text-left",children:[Object(o.jsx)("td",{className:"border-b border-slate-100 dark:border-slate-700 p-2",children:e.name}),Object(o.jsx)("td",{className:"border-b border-slate-100 dark:border-slate-700 p-2",children:e.format}),Object(o.jsx)("td",{className:"border-b border-slate-100 dark:border-slate-700 p-2",children:e.description}),Object(o.jsx)("td",{className:"border-b border-slate-100 dark:border-slate-700 p-2",children:Object(o.jsxs)("div",{className:"flex gap-2 space-x-8",children:[Object(o.jsx)(p,{variant:"secondary",onClick:function(){return t(e)},children:"Update"}),Object(o.jsx)(p,{variant:"error",onClick:function(){return h(e.name)},children:"Delete"}),Object(o.jsx)(p,{variant:"tertiary",onClick:function(){return function(e){b(e)}(e)},children:"Test"})]})})]},"row-".concat(a))}))})]}),d&&Object(o.jsx)(Y,{template:d,isOpen:d,onClose:function(){return b(null)}})]})},Z=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(),l=Object(s.a)(c,2),i=l[0],u=l[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"w-full",children:Object(o.jsx)(d,{children:Object(o.jsx)(p,{onClick:function(){return n(!a)},variant:"secondary",children:"".concat(a?"Back to Dashboard":"Add Template")})})}),a&&Object(o.jsx)(B,{back:function(){return n(!1)},existingTemplate:i}),!a&&Object(o.jsx)(Q,{handleUpdate:function(e){u(e),n(!0)}})]})},$=a(3),ee=a.p+"static/media/logo.dd0d67be.png",te=function(e){var t=Object.assign({},e);return Object(o.jsxs)("div",Object(l.a)(Object(l.a)({className:"w-full flex bg-blue-500 text-white h-20"},t),{},{children:[Object(o.jsx)("img",{src:ee,className:"m-3"}),Object(o.jsx)("div",{className:"m-auto",children:"Template Report Maintenance"})]}))},ae=function(e){var t=e.children;return Object(o.jsx)("div",{className:"w-full h-full",children:t})},re=function(){return Object(o.jsx)("div",{className:"relative flex py-5 items-center m-3",children:Object(o.jsx)("div",{className:"flex-grow border-t border-gray-200"})})},ne=function(){var e=Object($.f)();return Object(r.useEffect)((function(){e("/")}),[]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(te,{}),Object(o.jsx)(re,{}),Object(o.jsx)(ae,{children:Object(o.jsx)($.c,{children:Object(o.jsx)($.a,{exact:!0,path:"/",element:Object(o.jsx)(Z,{})})})})]})},ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))},se=a(21);a(38);c.a.render(Object(o.jsx)(se.a,{children:Object(o.jsx)(ne,{})}),document.getElementById("root")),ce()}},[[90,1,2]]]);
//# sourceMappingURL=main.bdbf2657.chunk.js.map